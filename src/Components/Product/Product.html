<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="/src/bootstrap-5.1.3-dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link href="./StartPage.css" rel="stylesheet" />
    <title>Document</title>
  </head>
  <body>
    <div id="nav-placeholder"></div>
    <script src="//code.jquery.com/jquery.min.js"></script>
    <script>
      $.get("/src/Components/Topbar/Topbar.html", function (data) {
        $("#nav-placeholder").replaceWith(data);
      });
    </script>
    <article class="container main-container">
        <section class="row">
          <div class="col-sm">
            <div id="product-content">
            <figure>
                <img id="productPageImgMain" class="main-img img-fluid" src="/src/assets/images/bird/bird.jpg" alt="A bird">
            <figure>
            </div>
            <div class="small-img-container">
                <figure>
                    <img class="small-img img-fluid" id="productPageImgLeft" src="/src/assets/images/bird/bird_cage.jpg" alt="A bird cage">
                </figure>
                <figure>
                    <img class="small-img img-fluid" id="productPageImgRight" src="/src/assets/images/bird/bird_cage.jpg" alt="A bird cage">
                </figure>
            </div>
            <div>
                <h3>Product name</h3>
                <p>Sales pitch</p>
            </div>
          </div>
          <div class="col-sm">
            <div class="product-info-container">
                <h3>Product details</h3>
                <ul>
                  <p>Product Fact 1<p>
                  <p>Product Fact 2<p>
                  <p>Product Fact 3<p>
                  </ul>
            </div>
            <div class="button-container">
                <button class="btn btn-outline-primary">Add to basket</button>
            <button class="btn btn-primary">Buy right away</button>
            </div>
          </div>
        </section>
    </article>
    <script
      type="text/javascript"
      src="/src/bootstrap-5.1.3-dist/js/bootstrap.bundle.min.js"
    ></script>
    <script type="module">
      let param = parent.document.URL.substring(parent.document.URL.indexOf('?') + 1, parent.document.URL.length);
      let productId = param.includes("product") ? param.substring(param.indexOf("=")  + 1 ) : null;
      // alert(product);

      import {products} from '/src/Data/Basket.js';


      let img = document.createElement('img');
      img.src = products[productId].image;

      let description = document.createElement('p');
      description.innerHTML = products[productId].description;

      let container = document.getElementById("product-content");

      container.appendChild(img);
      container.appendChild(description);

  </script>
  </body>
</html>