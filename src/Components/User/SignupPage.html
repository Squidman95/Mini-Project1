<html>
  <head>
    <title>Pet Shop Sign-up</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="/src/bootstrap-5.1.3-dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link href="./User.css" rel="stylesheet" />
  </head>
  <body>
    <div class="container">
      <form action="/src/Components/User/EditUserInfo.html">
        <h1 class="text-center">Sign up</h1>
        <label for="name">Name:</label><br />
        <input class="form-control" type="text" id="name" name="name" /><br />

        <label for="email">Email:</label><br />
        <input class="form-control" type="text" id="email" name="email" /><br />

        <label for="password">Password:</label><br />
        <input
          class="form-control"
          type="text"
          id="password"
          name="password"
        /><br />

        <label for="passwordRe">Re-type Password:</label><br />
        <input
          class="form-control"
          type="text"
          id="passwordRe"
          name="passwordRe"
        /><br />
        <p id="invalidText"></p>

        <input
          class="btn btn-primary"
          type="submit"
          onClick="store()"
          value="Sign-up!"
        />

        <input
          type="button"
          class="btn btn-secondary m-3"
          value="Cancel"
          onClick="history.back(-1)"
        />

        <br />
        <a href="/src/Components/User/LoginPage.html">
          Already a user? Log in instead.
        </a>
      </form>
    </div>

    <script type="text/javascript">
      function store() {
        // get elements that we need to save
        let name = document.getElementById("name").value;
        let email = document.getElementById("email").value;
        let password = document.getElementById("password").value;
        let passwordRe = document.getElementById("passwordRe").value;

        // console.log("name: " + name);
        // console.log("email: " + email);
        // console.log("password: " + password);
        // console.log("passwordRe: " + passwordRe);

        // If input passwords match, save all the information and go back.
        if (password == passwordRe) {
          localStorage.setItem("name", name);
          localStorage.setItem("email", email);
          localStorage.setItem("password", password);
          action = "/src/Components/User/EditUserInfo.html";
          // history.back(-1); // Navigate back to where you tried to login from. If it's a pop up, this shouldn't matter and should just close down
          //   console.log("name: " + localStorage.getItem("name"));
          //   console.log("email: " + localStorage.getItem("email"));
          //   console.log("password: " + localStorage.getItem("password"));
          //   console.log("passwordRe: " + localStorage.getItem("passwordRe"));
        } else {
          document.getElementById("invalidText").innerHTML =
            "The passwords do not match";
        }
      }
    </script>
  </body>
</html>
